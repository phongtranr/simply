{{!-- Layout --}}
{{!< default}}

<header class="author-header">
    <div class="px-4 py-12 md:py-vw6 mx-auto max-w-3xl text-center">
        <h1 class="text-3xl md:text-4xl text-title">{{t "The full archive"}}</h1>
        <div class="mt-5 text-lg text-gray-500">{{t "There are {total} posts in total" total=pagination.total}}</div>
    </div>
</header>

<div class="site-post container mx-auto pb-10">
    <div class="feed-entry-wrap max-w-3xl mx-auto">

        {{#foreach posts}}
        <article class="archive-post" data-year="{{date format="YYYY"}}" data-month="{{date format="MM"}}">
            <header class="archive-heading flex items-center justify-between gap-6 px-6 pt-8 pb-4">
                <span class="archive-year-label text-sm font-semibold uppercase tracking-[0.35em] text-slate-400">{{date format="YYYY"}}</span>
                <span class="archive-month-label text-xs font-semibold uppercase tracking-[0.35em] text-slate-500">{{date format="MMMM"}}</span>
            </header>
            <a class="archive-link block text-title transition hover:text-dark" href="{{url}}">
                <div class="archive-body border-t border-slate-200 px-6 py-5">
                    <h2 class="archive-title text-2xl font-semibold leading-snug">{{title}}</h2>
                    <time class="archive-posted mt-3 block text-sm font-medium uppercase tracking-[0.3em] text-slate-400" datetime="{{date format="YYYY-MM-DD"}}">{{date format="DD MMM"}}</time>
                </div>
            </a>
        </article>
        {{/foreach}}
    </div>
</div>

{{#contentFor "scripts"}}
<script>
    (function () {
        var wrapper = document.querySelector('.feed-entry-wrap')
        if (!wrapper) {
            return
        }
        var articles = Array.prototype.slice.call(wrapper.querySelectorAll('.archive-post[data-year][data-month]'))
        if (!articles.length) {
            return
        }
        var seenYears = []
        articles.forEach(function (article) {
            var year = article.getAttribute('data-year')
            var month = article.getAttribute('data-month')
            if (!year || !month) {
                return
            }

            if (seenYears.indexOf(year) === -1) {
                seenYears.push(year)
                article.id = 'year-' + year
            }
        })
    })()
</script>
{{/contentFor}}
